#!/bin/sh

for dir in `find . -type d -maxdepth 1 | grep -v "\.$" | grep -v "\./\." | sed "s/^\.\///"`; do
    for file in `git diff --cached --name-only | grep $dir`; do
        if ! [ -f $dir/Makefile ]; then
            ./xcsv.exe $dir;

            if [ $? != 0 ]; then
                exit 1;
            fi;
        fi;

        break;
    done;
done;
